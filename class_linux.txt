 

Welcome to OpenDev Etherpad!

This pad text is synchronized as you type, so that everyone viewing this page sees the same text. This allows you to collaborate seamlessly on documents!

OpenDev: https://opendev.org
Etherpad on Github: https://github.com/ether/etherpad-lite
tcs-AdvLinux-Oct06 | OpenDev Etherpad

step to configure master DNS server.



[root@master ~]# yum install bind
Last metadata expiration check: 1:54:51 ago on Monday 06 October 2025 09:45:39 AM IST.
Package bind-32:9.11.36-16.el8_10.4.x86_64 is already installed.
Nothing to do.
Complete!
[root@master ~]# yum list installed bind
Installed Packages
bind.x86_64                  32:9.11.36-16.el8_10.4                   @appstre




Step1
Dependencies resolved.
Step2.

# cp  /etc/named.conf /etc/named.conf.bak
[root@master ~]# vi /etc/named.conf
options {
        listen-on port 53 { 127.0.0.1; any; };
        listen-on-v6 port 53 { ::1; };
        directory       "/var/named";
        dump-file       "/var/named/data/cache_dump.db";
        statistics-file "/var/named/data/named_stats.txt";
        memstatistics-file "/var/named/data/named_mem_stats.txt";
        secroots-file   "/var/named/data/named.secroots";
        recursing-file  "/var/named/data/named.recursing";
        allow-query     { localhost; any; };
        
        
        
        
        zone "techi.com." IN {
        type master;
        file "techi.com.db";
};
zone "10.in-addr.arpa" IN {
        type master;
        file "techi.com.rev";
};

   Step3.
        #named-checkconf /etc/named.conf
   

   Step4
   
   [root@master ~]# cp /var/named/named.localhost /var/named/techi.com.db
[root@master ~]# vi /var/named/techi.com.db 
 
$TTL 1D
@       IN SOA  master.techi.com. root.master.techi.com.  (
                                        0       ; serial
                                        1D      ; refresh
                                        1H      ; retry
                                        1W      ; expire
                                        3H )    ; minimum
@       IN      NS      master.techi.com.
@       IN      A       10.0.3.91
master IN       A       10.0.3.91
       


Step5:
       
[root@master ~]# named-checkzone techi.com /var/named/techi.com.db 
zone techi.com/IN: loaded serial 0
OK


Step6.
[root@master ~]# cp /var/named/named.loopback /var/named/techi.com.rev
[root@master ~]# vi /var/named/techi.com.rev
$TTL 1D
@       IN SOA  master.techi.com. root.master.techi.com.  (
                                        0       ; serial
                                        1D      ; refresh
                                        1H      ; retry
                                        1W      ; expire
                                        3H )    ; minimum
@       IN      NS      master.techi.com.
@       IN      A       10.0.3.91
master IN       A       10.0.3.91


Step7:
    
[root@master ~]# named-checkzone techi.com /var/named/techi.com.rev
zone techi.com/IN: loaded serial 0
OK

Step8:
    [root@master ~]# chgrp named /var/named/techi.com.db 
[root@master ~]# chgrp named /var/named/techi.com.rev 
[root@master ~]# systemctl start named
[root@master ~]# systemctl enable --now  named
Created symlink /etc/systemd/system/multi-user.target.wants/named.service → /usr/lib/systemd/system/named.service.
[root@master ~]# systemctl status named
● named.service - Berkeley Internet Name Domain (DNS)
   Loaded: loaded (/usr/lib/systemd/system/named.service; enabled; vendor prese>
   Active: active (running) since Mon 2025-10-06 12:07:11 IST; 44s ago
 Main PID: 16083 (named)
    Tasks: 7 (limit: 23096)


Step9:
[root@master ~]# firewall-cmd --permanent --add-service=dns
success
[root@master ~]# 
[root@master ~]# firewall-cmd --reload 
success
[root@master ~]# 
[root@master ~]# firewall-cmd --list-all
public (active)
    
 
 Step10:
   
  [root@master ~]# vi /etc/resolv.conf   
    # Generated by NetworkManager
#nameserver 8.8.8.8
nameserver 10.0.3.91
search techi.com
~  

Step11:
    [root@master ~]# nslookup techi.com
Server:        10.0.3.91
Address:    10.0.3.91#53

Name:    techi.com
Address: 10.0.3.91

[root@master ~]# 
[root@master ~]# nslookup master.techi.com
Server:        10.0.3.91
Address:    10.0.3.91#53

Name:    master.techi.com
Address: 10.0.3.91

[root@master ~]# nslookup sys1.techi.com
Server:        10.0.3.91
Address:    10.0.3.91#53
               
               
               
               
            Client configuration on NODE3 VM
   [root@node3 ~]hostnamectl set-hostname client.techi.com
   
  [root@client ~]# vi /etc/resolv.conf   
    # Generated by NetworkManager
#nameserver 8.8.8.8
nameserver 10.0.3.91
search techi.com
        
      
[root@client ~]# nslookup master.techi.com
Server:        10.0.3.91
Address:    10.0.3.91#53


  
        DNS server config=========status completed .vimala.,Vikram, Ramesh Aravind, Vijayalakshmi, Sooraj Thampi,pavithra,Saravanakumar, Shenbagadevi, Papitha,Roshan,Ritobroto,Dhushyanth,sushil,bala,Boomadevi
        DNS server config=========status completed  -  Ghokul, Vikram,Shraddha, Ponnaiya, Anuradha, Souvik, Yamini,sukanta,Boomadevi,bala,sukanta,Kushan
                

        
        tcs-AdvLinux-Oct06 | OpenDev Etherpad
        
       # vi /var/named/techi.com.db
 master IN A 10.0.3.91
sys1    IN A 10.0.3.92
sys2    IN A 10.0.3.93
sys3    IN A 10.0.3.94
~                         
        
        
  [root@master ~]# vi /var/named/techi.com.rev 
    master IN       A       10.0.3.91

92.3.0 IN PTR sys1.techi.com.
93.3.0 IN PTR sys2.techi.com.
94.3.0 IN PTR sys3.techi.com.
~                                                                               
~[root@master ~]# vi /etc/sysconfig/network-scripts/ifcfg-ens18      


      IPADDR=10.0.3.91
PREFIX=8
GATEWAY=10.0.0.1
DNS1=10.0.3.91
DNS2=8.8.8.8
~     
    [root@master ~]# systemctl restart NetworkManager                       
    [root@master ~]# systemctl restart named
[root@master ~]# nslookup sys3.techi.com
Server:        10.0.3.91
Address:    10.0.3.91#53

Name:    sys3.techi.com
Address: 10.0.3.94

[root@master ~]# nslookup 10.0.3.94
94.3.0.10.in-addr.arpa    name = sys3.techi.com.



    slave configuration



    step1.

    # hostnamect set-hostname slave.techi.com

        #vim /etc/named.conf

    options {

        listen-on port 53 { 127.0.0.1;  any;  };

        listen-on-v6 port 53 { ::1; };

    .......

        recursing-file    "/var/named/data/named.recursing";

        allow-query     { localhost;  any; };

      };


            zone "techi.com." IN {

            type slave;

            file "slaves/techi.com.db";

    masters { 10.0.3.91; };

    };

    zone "10.in-addr.arpa" IN {

            type slave;

            file "slaves/techi.com.rev";

    masters { 10.0.3.91; };

};

    Step2.

        

    [root@slave ~]# named-checkconf /etc/named.conf

    zone techi.com/IN: loaded serial 0

    OK



    step3:

    [root@slave ~]# systemctl start named

    [root@slave ~]# systemctl enable --now  named

    Created symlink /etc/systemd/system/multi-user.target.wants/named.service → /usr/lib/systemd/system/named.service.

    [root@slave ~]# systemctl status named

    ● named.service - Berkeley Internet Name Domain (DNS)

       Loaded: loaded (/usr/lib/systemd/system/named.service; enabled; vendor prese>

       Active: active (running) since Mon 2025-10-06 12:07:11 IST; 44s ago

     Main PID: 16083 (named)

        Tasks: 7 (limit: 23096)




    Step4:

    [root@slave ~]# firewall-cmd --permanent --add-service=dns

    success

    [root@slave~]# 

    [root@slave ~]# firewall-cmd --reload 

    success

    [root@slave~]# 

    [root@slave~]# firewall-cmd --list-all

    public (active)


    Step 5


    [root@slave named]# tail -f /var/log/messages 



    Master node :


    step1:

    #vi /etc/named.conf

    options {

            listen-on port 53 { 127.0.0.1;  any;  };

            listen-on-v6 port 53 { ::1; };

            directory       "/var/named";

            dump-file       "/var/named/data/cache_dump.db";

            statistics-file "/var/named/data/named_stats.txt";

            memstatistics-file "/var/named/data/named_mem_stats.txt";

            secroots-file   "/var/named/data/named.secroots";

            recursing-file  "/var/named/data/named.recursing";

            allow-query     { localhost; any; };

            allow-transfer { 10.0.3.92;  };

            /*





    step2

    # vi /var/named/techi.com.db

    $TTL 1D

    @       IN SOA  master.techi.com. root.master.techi.com (

                                            2       ; serial

                                            1D      ; refresh

                                            1H      ; retry

                                            1W      ; expire

                                            3H )    ; minimum

    @       IN NS   master.techi.com.

    @       IN A    10.0.3.91

    master IN A 10.0.3.91

    slave IN A 10.0.3.92

    @       IN NS slave.techi.com.






    step3


    [root@master ~]# systemctl restart named

    [root@master ~]# dig @localhost techi.com soa


    ; <<>> DiG 9.11.36-RedHat-9.11.36-16.el8_10.4 <<>> @localhost techi.com soa

    ; (2 servers found)

    ;; global options: +cmd

    ;; Got answer:

    ;; ->>HEADER<<- opcode: QUERY, status: NOERROR, id: 5000

    ;; flags: qr aa rd ra; QUERY: 1, ANSWER: 1, AUTHORITY: 1, ADDITIONAL: 2


    ;; OPT PSEUDOSECTION:

    ; EDNS: version: 0, flags:; udp: 1232


    ; COOKIE: dd0fc9c4caf9326b55577b4968e4a03827f09ad9ec040e49 (good)

    ;; QUESTION SECTION:

    ;techi.com.            IN    SOA


    ;; ANSWER SECTION:

    techi.com.        86400    IN    SOA    master.techi.com. root.master.techi.com.techi.com. 2 86400 3600 604800 10800





    Client configuration



    STEP1


    [root@client ~]# vi /etc/sysconfig/network-scripts/ifcfg-ens18 


    DNS1=10.0.3.91

    DNS2=10.0.3.92


    STEP2


    [root@client ~]# systemctl restart NetworkManager

    [root@client ~]# nslookup sys3.techi.com

    Server:                10.0.3.91

    Address:        10.0.3.91#53


    Name:        sys3.techi.com

    Address: 10.0.3.94


    [root@client ~]# nslookup sys3.techi.com

    Server:                10.0.3.92

    Address:        10.0.3.92#53


    Name:        sys3.techi.com

    Address: 10.0.3.94




    Task Cname record  update 



    #vi /var/named/techi.com.db


    www IN CNAME sys1.techi.com.




    #systemctl restart named


    #nslookup  www.techi.com







UNBOUND CACHE SERVER Configuration:
    
step:1

 38  yum install unbound
 
Step2:
     
   39  vi /etc/unbound/unbound.conf 
Last line add this entry 


server:
        interface: 10.0.3.93-----------------------------(cache server ip address)
        port: 53
        access-control: 10.0.0.0/8 allow
forward-zone:
        name: "techi.com"
        forward-addr: 10.0.3.91----------------------------(master dns ip address)

:wq

step 3:
    
   #systemctl start unbound
   #systemctl enable unbound
   
   
  # firewall-cmd --permanent --add-service=dns
  # firewall-cmd --reload 
  
  Step4:
      
     #netstat -tulnp |grep 53
   #  dig @127.0.0.1
# dig @10.0.3.93 techi.com



client machine :
    
Step1:
        

    vi /etc/resolv.conf    or   /etc/sysconfig/network-scripts/ifcfg-ens18

    # Generated by NetworkManager
search techi.com
nameserver 10.0.3.93
~    
Step 2:
    
    [root@client ~]# nslookup sys2.techi.com
Server:                10.0.3.93
Address:        10.0.3.93#53

Non-authoritative answer:
Name:        sys2.techi.com
Address: 10.0.3.92

[root@client ~]# nslookup sys2.techi.com
Server:                10.0.3.93
Address:        10.0.3.93#53

Non-authoritative answer:
Name:        sys2.techi.com
Address: 10.0.3.92


UNBOUND SERVER  CLEAR CACHE:
STEP1:    
    
  DO this one  in Unbound server 
  
    #unbound-control dump_cache---------------------------------------------------to view server cache
   # unbound-control dump_cache|grep techi.com-------------------------------------to view specific domain cache
   
#unbound-control flush_zone techi.com-------------------------------------to clear server cahce



STEP2: check from client machine 
#nslookup sys2.techi.com ---------------------------------------------------it shows new changed ip address 



DHCP Server Configuration:
  STEP1:
        
 [root@master ~]# yum install dhcp-server
 [root@master ~]# vi /etc/dhcp/dhcpd.conf 
#
# DHCP Server Configuration file.
#   see /usr/share/doc/dhcp-server/dhcpd.conf.example
#   see dhcpd.conf(5) man page
#
subnet 10.0.0.0 netmask 255.0.0.0 {
range 10.0.50.1 10.0.50.10;
option domain-search "techi.com";
option domain-name-servers 10.0.3.91;
option broadcast-address 10.255.255.255;
default-lease-time 600;
max-lease-time 7200;
}





# dhcpd -t
  # echo $?
  #  systemctl start dhcpd
  #  systemctl enable dhcpd
 #  firewall-cmd --permanent --add-service=dhcp
 #  firewall-cmd --permanent --add-service=dhcp
  #  firewall-cmd --reload 
  #  vi /var/lib/dhcpd/dhcpd.leases
  #  systemctl stop dhcpd-----------------------------------------please do this step  immediately
  #systemctl disable dhcpd



NFS SERVER CONFIGURATION (CASE 1)

Step1:
[root@master ~]#  yum install nfs-utils

Step 2:
    
[root@master ~]# mkdir /nfsshare
[root@master ~]# useradd appuser
[root@master ~]# vi /nfsshare/file1
[root@master ~]# chown -R appuser /nfsshare/
[root@master ~]# ls -ld /nfsshare/
drwxr-xr-x. 2 appuser root 19 Oct  9 11:57 /nfsshare/

Step 3:
    
[root@master ~]# vi /etc/exports
/nfsshare       10.0.3.92(rw,sync)
~                                                                               
~                                        
:wq


Step4:
    #  systemctl start nfs-server
  # systemctl enable nfs-server
  #  exportfs -v
  # firewall-cmd --permanent --add-service=nfs
  # firewall-cmd --permanent --add-service=rpc-bind
  # firewall-cmd --permanent --add-service=mountd
  # firewall-cmd --reload 
  # firewall-cmd --list-all
 #  id appuser---------------------------------------------------------------------------------------same id create user in client machine 

  SLAVE/CLIENT SIDE CONFIGURATION  
  
  Step1:
      [root@slave ~]# yum install nfs-utils
Step2:
    [root@slave ~]# showmount -e 10.0.3.91

    Export list for 10.0.3.91:

    /nfsshare 10.0.3.92



[root@slave ~]# mkdir /localnfs
[root@slave ~]# mount 10.0.3.91:/nfsshare /localnfs
[root@slave ~]# ls /localnfs/

    file1



[root@slave ~]# df -h

[root@slave ~]# useradd -u 1001 appuser
[root@slave ~]# su - appuser
[appuser@slave ~]$ cd /localnfs/
[appuser@slave localnfs]$ ls
file1
[appuser@slave localnfs]$ vi file1 
[appuser@slave localnfs]$ exit
logout

-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------







Scenario 2:
    
    
    Step1
    [root@master ~]# mkdir /share2
    
[root@master ~]# vi /share2/file1
welcome to nfs server


[root@master ~]# vi /etc/exports
/nfsshare       10.0.3.92(rw,sync)
/share2         10.0.3.131(rw,sync)


~  [root@master ~]# systemctl restart nfs-server
[root@master ~]# exportfs -v
/nfsshare             10.0.3.92(sync,wdelay,hide,no_subtree_check,sec=sys,rw,secure,root_squash,no_all_squash)
/share2               10.0.3.131(sync,wdelay,hide,no_subtree_check,sec=sys,rw,secure,root_squash,no_all_squash)


[root@master ~]# ls -ld /share2/
drwxr-xr-x. 2 root root 19 Oct 10 09:14 /share2/
 
 
 Client Side:
     
  Step 1:   
    [root@client ~]# showmount -e 10.0.3.91
Export list for 10.0.3.91:
/share2   10.0.3.131
/nfsshare 10.0.3.92

[root@client ~]# mkdir /local2

[root@client ~]# mount 10.0.3.91:/share2     /local2/

[root@client ~]# df -h

  [root@client ~]# ls /local2/
file1
[root@client ~]# vi /local2/file1         

editing not allowed(exit with out saving )



Go TO master Do editing in config file 

Step1:
    
[root@master ~]# vi /etc/exports
/nfsshare       10.0.3.92(rw,sync)
/share2         10.0.3.131(rw,sync,no_root_squash)


:wq

Step 2:
     [root@master ~]# systemctl restart nfs-server
     
    
 DO it on Client Machine    
 
 
 Step1:
     [root@client ~]# umount /local2 
     
[root@client ~]# mount 10.0.3.91:/share2 /local2/

[root@client ~]# vi /local2/file1 

    EDiting is allowed using no_root_squash
    
    ---------------------------------------------------------------------------------------
      
    
    
   Scenario 3:  Group wise asscess share folder
       
   Master Server side configuration
Step1:
[root@master ~]# groupadd  -g 1200  finance
    [root@master ~]# useradd   -u 1201  fuser3  -G  finance 
[root@master ~]# useradd  -u 1202  fuser4   -G  finance 
[root@master ~]# groupmems -g finance -l
fuser3  fuser4 


  Step2:      
   root@master# mkdir /financedocs
[root@master ~]# vi /financedocs/newfile
edit the newfile with some text and save
[root@master ~]# chmod -R 3770 /financedocs/
[root@master ~]# chgrp -R finance /financedocs/
[root@master ~]# ls -ld /financedocs/
drwxrws--T. 2 root finance 21 Oct 10 09:45 /financedocs/

Step3:
   

[root@master ~]# vi /etc/exports

    /nfsshare       10.0.3.92(rw,sync)
/share2         10.0.3.131(rw,sync)
/financedocs    *(rw,sync)====================================================================add this  new  line
~                                      
    [root@master ~]# systemctl restart nfs-server


Client side configuration:
    
Step1
[root@client ~]# showmount -e 10.0.3.91
Export list for 10.0.3.91:
/financedocs *
/share2      10.0.3.131
/nfsshare    10.0.3.92

#mkdir /financelocal
[root@client ~]# mount 10.0.3.91:/financedocs /financelocal/

Step 2:

   [root@client ~]# groupadd  -g 1200  finance
    [root@client ~]# useradd   -u 1201  fuser3  -G  finance 
[root@client ~]# useradd  -u 1202  fuser4   -G  finance 
[root@client ~]# groupmems -g finance -l
fuser3  fuser4 

  
  
  Step3:   
      
   [root@client ~]# su - fuser3============================================================login any finance user and create or try to edit file it will allow 
[fuser3@client ~]$ ls /financelocal/
newfile
[fuser3@client ~]$ 
   
  

SAMBA server config 

Step1:
    
#yum install samba 

[root@master ~]# groupadd  marketing
[root@master ~]# useradd dev1 -G marketing
[root@master ~]# useradd dev2 -G marketing
[root@master ~]# mkdir /smbmark
[root@master ~]# vi /smbmark/f1
Add content

:wq

step 2:
    
[root@master ~]# chgrp -R marketing /smbmark/
[root@master ~]# chmod -R 2775 /smbmark/
[root@master ~]# ls -ldZ /smbmark/
drwxrws---. 2 root marketing unconfined_u:object_r:default_t:s0 16 Oct 10 11:34 /smbmark/

[root@master ~]# semanage fcontext -a -t samba_share_t '/smbmark(/.*)?'
[root@master ~]# restorecon -Rv /smbmark/
Relabeled /smbmark from unconfined_u:object_r:default_t:s0 to unconfined_u:object_r:samba_share_t:s0
Relabeled /smbmark/f1 from unconfined_u:object_r:default_t:s0 to unconfined_u:object_r:samba_share_t:s0

[root@master ~]# ls -ldZ /smbmark/
drwxrws---. 2 root marketing unconfined_u:object_r:samba_share_t:s0 16 Oct 10 11:34 /smbmark/

[root@master ~]# vi /etc/samba/smb.conf


[global]
        workgroup = TCS
        security = user

[windowsdata]
        path = /smbmark
        write list = @marketing, fuser3




:wq

#testparm----------------------------(check syntax)


[root@master ~]# smbpasswd -a dev1
New SMB password:
Retype new SMB password:
Added user dev1.

[root@master ~]# smbpasswd -a dev2
New SMB password:
Retype new SMB password:
Added user dev2.

[root@master ~]# systemctl start smb
[root@master ~]# systemctl enable  smb
Created symlink /etc/systemd/system/multi-user.target.wants/smb.service → /usr/lib/systemd/system/smb.service.

[root@master ~]# firewall-cmd --permanent --add-service=samba
success
[root@master ~]# firewall-cmd --reload 
success
[root@master ~]# 
[root@master ~]# useradd smbmount
[root@master ~]# smbpasswd -a smbmount
New SMB password:
Retype new SMB password:
Added user smbmount.



Client side configuration
Stel1

 # yum install samba-client cifs-utils
 
  #mkdir /devlocal
# smbclient -L //10.0.3.91  -U dev1 
Step:2   

#vi /etc/samba/creds.txt
username=smbmount
password=redhat

Step 3:
#vi /etc/fstab


"Go to last line using G option"  then edit 

//10.0.3.91/windowsdata /devlocal       cifs credentials=/etc/samba/creds.txt,multiuser 0 0


:wq

#mount -a
#systemctl daemon-reload
#mount -a

Step4:
#useradd dev1
#su - dev1
dev1#cifscreds add 10.0.3.91
password: redhat

dev1# ls /devlocal
dev1#touch /devlocal/f4
dev1#exit




Iscsi server side configuration


[root@slave ~]# yum install targetcli

Complete!
[root@slave ~]# targetcli
targetcli   targetclid  
[root@slave ~]# targetcli
Warning: Could not load preferences file /root/.targetcli/prefs.bin.
targetcli shell version 2.1.53
Copyright 2011-2013 by Datera, Inc and others.
For help on commands, type 'help'.

/> ls
o- / ..................................................................... [...]
  o- backstores .......................................................... [...]
  | o- block .............................................. [Storage Objects: 0]
  | o- fileio ............................................. [Storage Objects: 0]
  | o- pscsi .............................................. [Storage Objects: 0]
  | o- ramdisk ............................................ [Storage Objects: 0]
  o- iscsi ........................................................ [Targets: 0]
  o- loopback ..................................................... [Targets: 0]
/> cd backstores/block 
/backstores/block> create disk1 /dev/sdb
Created block storage object disk1 using /dev/sdb.
/backstores/block> ls 

/backstores/block> cd ..
/backstores> cd ..
/> cd iscsi 
/iscsi> create iqn.2025-10.com.techi:slave.techi.com
Created target iqn.2025-10.com.techi:slave.techi.com.
Created TPG 1.
Global pref auto_add_default_portal=true
Created default portal listening on all IPs (0.0.0.0), port 3260.
/iscsi> ls

/iscsi> cd iqn.2025-10.com.techi:slave.techi.com/tpg1/acls 
/iscsi/iqn.20...com/tpg1/acls> create iqn.2025-10.com.techi:client.techi.com
Created Node ACL for iqn.2025-10.com.techi:client.techi.com
/iscsi/iqn.20...com/tpg1/acls> cd ..
/iscsi/iqn.20...echi.com/tpg1> cd luns 
/iscsi/iqn.20...com/tpg1/luns> create /backstores/block/disk1 
Created LUN 0.
Created LUN 0->0 mapping in node ACL iqn.2025-10.com.techi:client.techi.com
/iscsi/iqn.20...com/tpg1/luns> ls
o- luns .............................................................. [LUNs: 1]
  o- lun0 .......................... [block/disk1 (/dev/sdb) (default_tg_pt_gp)]
/iscsi/iqn.20...com/tpg1/luns> cd ..
/iscsi/iqn.20...echi.com/tpg1> cd portals/
/iscsi/iqn.20.../tpg1/portals> ls
o- portals ........................................................ [Portals: 1]
  o- 0.0.0.0:3260 ......................................................... [OK]
/iscsi/iqn.20.../tpg1/portals> delete 0.0.0.0 3260
Deleted network portal 0.0.0.0:3260
/iscsi/iqn.20.../tpg1/portals> create 10.0.3.92 3260
Using default IP port 3260
Created network portal 10.0.3.92:3260.
/iscsi/iqn.20.../tpg1/portals> ls
o- portals ........................................................ [Portals: 1]
  o- 10.0.3.92:3260 ....................................................... [OK]
/iscsi/iqn.20.../tpg1/portals> exit


[root@slave ~]# systemctl enable target
Created symlink /etc/systemd/system/multi-user.target.wants/target.service → /usr/lib/systemd/system/target.service.
[root@slave ~]# 
[root@slave ~]# systemctl start target



[root@slave ~]# firewall-cmd --permanent --add-port=3260/tcp
success
[root@slave ~]# 
[root@slave ~]# firewall-cmd --reload 


ISCSI Cache/Client side configuration

 #yum install iscsi-initiator-utils
   #  vi /etc/iscsi/initiatorname.iscsi 
   InitiatorName=iqn.2025-10.com.techi:client.techi.com
   
   
   
   :wq
    #  systemctl start iscsid
   # systemctl enable  iscsid
   # iscsiadm -m discovery -t st -p 10.0.3.92
   # lsblk
   # iscsiadm -m node -T iqn.2025-10.com.techi:slave.techi.com 10.0.3.92 -l
   #lsblk
  
   #  fdisk /dev/sdb

    Command (m for help): n

    Partition type

       p   primary (0 primary, 0 extended, 4 free)

       e   extended (container for logical partitions)

    Select (default p): p

    Partition number (1-4, default 1): 1

    First sector (65528-20971519, default 65528):   

    Last sector, +sectors or +size{K,M,G,T,P} (65528-20971519, default 20971519): +5G 


    Created a new partition 1 of type 'Linux' and of size 5 GiB.


    Command (m for help): p

    Disk /dev/sdb: 10 GiB, 10737418240 bytes, 20971520 sectors

    Units: sectors of 1 * 512 = 512 bytes

    Sector size (logical/physical): 512 bytes / 512 bytes

    I/O size (minimum/optimal): 512 bytes / 33550336 bytes

    Disklabel type: dos

    Disk identifier: 0x98796435


    Device     Boot Start      End  Sectors Size Id Type

    /dev/sdb1       65528 10550007 10484480   5G 83 Linux


    Command (m for help): w

    The partition table has been altered.

    Calling ioctl() to re-read partition table.

    Syncing disks.

   
   #  mkfs.xfs /dev/sdb1
   #  mkdir /SAN
   #  mount /dev/sdb1 /SAN
   #  df -h
  
   # cd /SAN/
   #  mkdir doc{1,2,3}
   # touch file{1..100}
   #  ls
   #  exit
   # df -h
   #  ls /SAN/
   #  umount /SAN 
   #  ls /SAN/
   #  iscsiadm -m session 10.0.3.92
   #  iscsiadm -m session 10.0.3.92 -u
   #  lsblk

   
~                                                         
It works, able to mount the iscsi share on the multiple servers. The exported share cannot be mounted on the master server because the device is already exported as iscsi share.server side mount is not possible .


Scenario 2:
    Create  fileio block
Server side config    
    
[root@slave ~]# targetcli
targetcli shell version 2.1.53
Copyright 2011-2013 by Datera, Inc and others.
For help on commands, type 'help'.

/> cd backstores/fileio 
/backstores/fileio> create disk2 /root/disk2  200MB
Created fileio disk2 with size 209715200
/backstores/fileio> ls
o- fileio ................................................. [Storage Objects: 1]
  o- disk2 ..................... [/root/disk2 (200.0MiB) write-back deactivated]
    o- alua ................................................... [ALUA Groups: 1]
      o- default_tg_pt_gp ....................... [ALUA state: Active/optimized]
/backstores/fileio> cd ..
/backstores> cd ..
/> cd iscsi/
/iscsi> create iqn.2025-10.com.techi:slave.techi.com
This Target already exists in configFS
/iscsi> create iqn.2025-11.com.techi:slave.techi.com
Created target iqn.2025-11.com.techi:slave.techi.com.
Created TPG 1.
Default portal not created, TPGs within a target cannot share ip:port.
/iscsi> cd iqn.2025-11.com.techi:slave.techi.com/tpg1/acls 
/iscsi/iqn.20...com/tpg1/acls> create iqn.2025-10.com.techi:client.techi.com
Created Node ACL for iqn.2025-10.com.techi:client.techi.com
/iscsi/iqn.20...com/tpg1/acls> cd ..
/iscsi/iqn.20...echi.com/tpg1> cd luns 
/iscsi/iqn.20...com/tpg1/luns> create /backstores/fileio/disk2 
Created LUN 0.
Created LUN 0->0 mapping in node ACL iqn.2025-10.com.techi:client.techi.com
/iscsi/iqn.20...com/tpg1/luns> cd ..
/iscsi/iqn.20...echi.com/tpg1> cd portals 
/iscsi/iqn.20.../tpg1/portals> ls
o- portals ........................................................ [Portals: 0]
/iscsi/iqn.20.../tpg1/portals> create 10.0.3.92 3260
Using default IP port 3260
Created network portal 10.0.3.92:3260.
/iscsi/iqn.20.../tpg1/portals> ls
o- portals ........................................................ [Portals: 1]
  o- 10.0.3.92:3260 ....................................................... [OK]
/iscsi/iqn.20.../tpg1/portals> exit



#systemctl restart target




Cache/client side config

#iscsiadm  -m session 
  #iscsiadm -m discovery -t st -p 10.0.3.92
  
  #  iscsiadm -m node -T iqn.2025-11.com.techi:slave.techi.com 10.0.3.92 -l
  
  # iscsiadm  -m session 
  
  #  lsblk
  
  # fdisk /dev/sdc

    Command (m for help): n

    Partition type

       p   primary (0 primary, 0 extended, 4 free)

       e   extended (container for logical partitions)

    Select (default p): p

    Partition number (1-4, default 1): 1

    First sector (65528-20971519, default 65528):   Enter

    Last sector, +sectors or +size{K,M,G,T,P} (65528-20971519, default 20971519): enter


    Created a new partition 1 of type 'Linux' and of size 200MB


    Command (m for help): p

    Disk /dev/sdb: 10 GiB, 10737418240 bytes, 20971520 sectors

    Units: sectors of 1 * 512 = 512 bytes

    Sector size (logical/physical): 512 bytes / 512 bytes

    I/O size (minimum/optimal): 512 bytes / 33550336 bytes

    Disklabel type: dos

    Disk identifier: 0x98796435


    Device     Boot Start      End  Sectors Size Id Type

    /dev/sdc1     65528 2000 10484480   200M  83 Linux


    Command (m for help):w


  
  
  
 
  #  mkfs.ext4 /dev/sdc1
  # mkdir /newblock
  #  mount /dev/sdc1 /newblock/
  #  df -h
  # lsblk 

status : Vimala, Ramesh,Shraddha,Souvik, Vikram,Ponnaiya ,bala,Dhushyanth,Boomadevi,sukanta
    

Configuring POSTFIX server :
    
    [root@master ~]# yum install postfix mailx
[root@master ~]# vi /etc/postfix/main.cf

line:102 mydomain = techi.com

line:118 myorigin = $mydomain 

line:136 inet_interfaces = loopback-only  

line:184 mydestination = $myhostname, localhost.$mydomain, localhost, techi.com

line:285  mynetworks = 127.0.0.0/8, 10.0.0.0/8 

line:334 relayhost = $mydomain 

:wq

root@master ~]# systemctl start postfix 
[root@master ~]# systemctl enable postfix 


[root@master ~]# firewall-cmd --permanent --add-service=smtp
success
[root@master ~]# 
[root@master ~]# firewall-cmd --reload 
success
[root@master ~]# 
[root@master ~]# useradd u1
[root@master ~]# useradd u2
[root@master ~]# tail -f /var/log/maillog

[root@master ~]# echo "my new mail"| mailx -s "first mail" u1@techi.com
[root@master ~]# 
[root@master ~]# tail -f /var/log/maillog

[root@master ~]# su - u1
[u1@master ~]$ mail
Heirloom Mail version 12.5 7/5/10.  Type ? for help.
"/var/spool/mail/u1": 1 message 1 new
>N  1 root                  Tue Oct 14 10:51  18/550   "first mail"
& 
Message  1:
    
    
    [u1@master ~]$ mail -s "test" u2@techi.com
welcome to techi postfix mail server
EOT
[u1@master ~]$ exit
logout
[root@master ~]# su - u2
[u2@master ~]$ mail
Heirloom Mail version 12.5 7/5/10.  Type ? for help.
"/var/spool/mail/u2": 1 message 1 new
>N  1 u1@techi.com          Tue Oct 14 11:01  18/559   "test"
& 1
Message  1:

    


  
    
    
    
    configuring Apache server 
    
    
    Configure Basic web server
    
    
    [root@master ~]# yum install httpd
    
[root@master ~]# vi /var/www/html/index.html
welcome to new techi.com website

[root@master ~]# systemctl start httpd
[root@master ~]# 
[root@master ~]# systemctl enable  httpd
Created symlink /etc/systemd/system/multi-user.target.wants/httpd.service → /usr/lib/systemd/system/httpd.service.

[root@master ~]# firewall-cmd --permanent --add-service=http
success
[root@master ~]# firewall-cmd --reload 
success
[root@master ~]# 


[root@master ~]# nslookup master.techi.com
Server:                10.0.3.91
Address:        10.0.3.91#53

Name:        master.techi.com
Address: 10.0.3.91

[root@master ~]# curl master.techi.com

welcome to techi.com new website



Configuring Redirecting default website 
    
    
    [root@master ~]# mkdir -p /srv/{default,site1}/www
    
[root@master ~]# tree /srv
/srv
├── default
│   └── www
└── site1
    └── www

4 directories, 0 files

[root@master ~]# ls -lZ /srv/
total 0
drwxr-xr-x. 3 root root unconfined_u:object_r:var_t:s0 17 Oct 14 12:29 default
drwxr-xr-x. 3 root root unconfined_u:object_r:var_t:s0 17 Oct 14 12:29 site1

[root@master ~]# semanage fcontext -a -t httpd_sys_content_t '/srv(/.*)?'-----------------------------------------------------------configure selinux lable 
[root@master ~]# restorecon -Rv /srv

root@master ~]# vi /etc/httpd/conf.d/default.conf

<VirtualHost _default_:80>
DocumentRoot /srv/default/www
CustomLog "logs/default.log" combined
<Directory /srv/default/www>
Require all granted
</Directory>
</VirtualHost>


:wq


[root@master ~]# hostnamectl set-hostname master.techi.com

[root@master ~]# hostname
master.techi.com

[root@master ~]# httpd -t
Syntax OK
[root@master ~]# apachectl configtest
Syntax OK
[root@master ~]# 

[root@master ~]# vi /srv/default/www/index.html
default content from /srv/default/www---------------------------------------------------------------------------(web page content)


[root@master ~]# systemctl restart httpd

[root@master ~]# curl master.techi.com


check from firefox Browser also  and check from client vm 


[root@master ~]# tree /srv
/srv
├── default
│   └── www
│       └── index.html
└── site1
    └── www

4 directories, 1 file
[root@master ~]# vi /etc/httpd/conf.d/site1.conf
<VirtualHost *:80>
ServerName site1.techi.com
ServerAlias site1
DocumentRoot /srv/site1/www
CustomLog "logs/site1.log" combined  ====================================(record access log details and additional info about user agent )
<Directory /srv/site1/www>
Require all granted
</Directory>
</VirtualHost>



[root@master ~]# httpd -t
Syntax OK

[root@master ~]# vi /srv/site1/www/index.html
welcome to site1.techi.com

[root@master ~]# systemctl restart httpd
[root@master ~]# nslookup site1.techi.com
Server:                10.0.3.91
Address:        10.0.3.91#53

** server can't find site1.techi.com: NXDOMAIN

[root@master ~]# vi /var/named/techi.com.db 
 site1   IN A 10.0.3.91



[root@master ~]# systemctl restart named
[root@master ~]# nslookup site1.techi.com
Server:                10.0.3.91
Address:        10.0.3.91#53

Name:        site1.techi.com
Address: 10.0.3.91

[root@master ~]# curl site1.techi.com
testing site1.com
[root@master ~]# curl master.techi.com
default page from /srv/default/www
[root@master ~]# 


Configure  site2 

[root@master ~]# mkdir -p /srv/site2/www
[root@master ~]# restorecon -Rv /srv/
Relabeled /srv/site2 from unconfined_u:object_r:var_t:s0 to unconfined_u:object_r:httpd_sys_content_t:s0
Relabeled /srv/site2/www from unconfined_u:object_r:var_t:s0 to unconfined_u:object_r:httpd_sys_content_t:s0
[root@master ~]# vi /etc/httpd/conf.d/site2.conf
<VirtualHost *:80>
ServerName site2.techi.com
ServerAlias site2
DocumentRoot /srv/site2/www
ErrorLog "logs/site2_error.log"
CustomLog "logs/site2_access.log" combined
<Directory /srv/site2/www>
Require all granted
</Directory>
</VirtualHost>






[root@master ~]# httpd -t
Syntax OK
[root@master ~]# systemctl restart httpd
[root@master ~]# systemctl restart named
[root@master ~]# nslookup site2.techi.com
Server:                10.0.3.91
Address:        10.0.3.91#53

Name:        site2.techi.com
Address: 10.0.3.91

[root@master ~]# curl site2.techi.com



Configure Https secure website 


#openssl genrsa -out techi.com.key 2048
 
  # openssl req -new -key techi.com.key -out techi.com.csr
  #  ls

  # openssl  x509 -req -days 365 -in techi.com.csr -signkey techi.com.key -out techi.com.crt
  #  ls
  #  openssl  req -x509 -new -nodes -key techi.com.key -sha256 -days 365 -out cacert.crt
  
  #cp techi.com.key /etc/pki/tls/private/
  
  # cp techi.com.crt /etc/pki/tls/certs/
  
  #cp cacert.crt /etc/pki/tls/certs/
  
  #  yum install mod_ssl
  
  #  vi /etc/httpd/conf.d/ssl.conf 
 <VirtualHost *:443>
 ServerName site1.techi.com 
 SSLEngine On 
SSLProtocol all -SSLv2 -SSLv3
SSLCipherSuite HIGH:MEDIUM:!aNull:!MD5
 SSLHonorCipherOrder on 
 SSLCertificateFile /etc/pki/tls/certs/techi.com.crt 
 SSLCertificateKeyFile /etc/pki/tls/private/techi.com.key 
 SSLCertificateChainFile /etc/pki/tls/certs/cacert.crt 
 DocumentRoot /srv/site1/www   
 <Directory /srv/site1/www>
 Require all granted
</Directory>
</VirtualHost>

<VirtualHost *:80>
ServerName site1.techi.com
Redirect "/" "https://site1.techi.com"
</VirtualHost>


:wq


#httpd -t
#systemctl restart httpd

# firewall-cmd --permanent --add-service=https
#  firewall-cmd --reload 

# curl -k https://site1.techi.com

and from Browser
url https://site1.techi.com



Configuring Nginx web server 

[root@master ~]#yum install nginx

[root@master ~]# mkdir -p /srv/nginx/www

[root@master ~]# vi /srv/nginx/www/index.html
welcome to !nginx


[root@master ~]# restorecon -Rv /srv/

[root@master conf.d]# vi /etc/nginx/conf.d/default.conf  
server {    
listen 80;     
server_name master.techi.com;      
access_log /var/log/nginx/techi.com.log;
error_log /var/log/nginx/techi.com.error.log;
root /srv/nginx/www;     
index index.html index.htm;          
location / {     try_files $uri $uri/ =404;     
} 
} 


:wq

#nginx -t 

[root@master ~]# systemctl stop httpd
[root@master ~]# systemctl start nginx
[root@master ~]# curl master.techi.com
welcome to !nginx


NIC BONDING (NIC TEAMING) configuration
[root@client ~]# nmcli connection show 

[root@client ~]# nmcli connection add type bond ifname bond0 con-name bond0 mode active-backup
Connection 'bond0' (84bdbf87-f192-4a67-961d-3e76cc7d4a60) successfully added.

[root@client ~]# nmcli connection show 
NAME                UUID                                  TYPE      DEVICE 
bond0               84bdbf87-f192-4a67-961d-3e76cc7d4a60  bond      bond0  
ens18               4c8fcd4e-8e35-4300-92f7-370d192bf315  ethernet  ens18  
virbr0              74e9e4d7-321f-4667-b4a8-c24bb4eae9ff  bridge    virbr0 
Wired connection 1  92217f69-a7b0-4f0d-b625-28f014483fdf  ethernet  --     
Wired connection 2  28a99c5a-54f8-483c-951e-83bb0a127c0a  ethernet  --     

[root@client ~]# nmcli connection add type ethernet ifname ens19 con-name bond0-port1 master bond0
Connection 'bond0-port1' (ae06169d-dd8f-46ba-ad9d-e7ef3b188504) successfully added.

[root@client ~]# nmcli connection add type ethernet ifname ens20 con-name bond0-port2 master bond0


[root@client ~]# nmcli connection modify bond0 ipv4.addresses 10.0.50.91/8

[root@client ~]# nmcli connection up bond0
Connection successfully activated (master waiting for slaves) (D-Bus active path: /org/freedesktop/NetworkManager/ActiveConnection/343)

[root@client ~]# nmcli connection show 

[root@client ~]# ip addr show bond0
[root@client ~]# cat /proc/net/bonding/bond0 

Testing(find out which NIC is active then disble )

[root@client ~]# nmcli connection down bond0-port1
Connection 'bond0-port1' successfully deactivated (D-Bus active path: /org/freedesktop/NetworkManager/ActiveConnection/364)

[root@client ~]# nmcli connection show 


root@client ~]# cat /proc/net/bonding/bond0 

SET PRIMARY NIC

root@client ~]# nmcli connection modify bond0 primary ens19


[root@client ~]# nmcli connection up bond0-port1
Connection successfully activated (D-Bus active path: /org/freedesktop/NetworkManager/ActiveConnection/397)

[root@client ~]# nmcli connection up bond0-port2
Connection successfully activated (D-Bus active path: /org/freedesktop/NetworkManager/ActiveConnection/398)

[root@client ~]# cat /proc/net/bonding/bond0 

Boomadevi, Sooraj Thampi,sushil,Dhushyanth, Anu,Ramesh,Souvik,bala,Shraddha, Vijayalakshmi,sukanta



Configure Mariadb server


[root@slave ~]# yum install mariadb-server mariadb

[root@slave ~]# systemctl start mariadb
^[[A[root@slave ~]# systemctl enable mariadb




[root@slave ~]# systemctl restart mariadb
[root@slave ~]# mysql_secure_installation 

NOTE: RUNNING ALL PARTS OF THIS SCRIPT IS RECOMMENDED FOR ALL MariaDB
      SERVERS IN PRODUCTION USE!  PLEASE READ EACH STEP CAREFULLY!

In order to log into MariaDB to secure it, we'll need the current
password for the root user.  If you've just installed MariaDB, and
you haven't set the root password yet, the password will be blank,
so you should just press enter here.

Enter current password for root (enter for none): Enter
OK, successfully used password, moving on...

Setting the root password ensures that nobody can log into the MariaDB
root user without the proper authorisation.

Set root password? [Y/n] Y
New password: redhat
Re-enter new password: redhat
Password updated successfully!
Reloading privilege tables..
 ... Success!


By default, a MariaDB installation has an anonymous user, allowing anyone
to log into MariaDB without having to have a user account created for
them.  This is intended only for testing, and to make the installation
go a bit smoother.  You should remove them before moving into a
production environment.

Remove anonymous users? [Y/n] Y
 ... Success!

Normally, root should only be allowed to connect from 'localhost'.  This
ensures that someone cannot guess at the root password from the network.

Disallow root login remotely? [Y/n] Y
 ... Success!

By default, MariaDB comes with a database named 'test' that anyone can
access.  This is also intended only for testing, and should be removed
before moving into a production environment.

Remove test database and access to it? [Y/n] Y
 - Dropping test database...
 ... Success!
 - Removing privileges on test database...
 ... Success!

Reloading the privilege tables will ensure that all changes made so far
will take effect immediately.

Reload privilege tables now? [Y/n] Y
 ... Success!

Cleaning up...

All done!  If you've completed all


root@slave ~]# mysql -u root -p
Enter password: redhat
Welcome to the MariaDB monitor.  Commands end with ; or \g.
Your MariaDB connection id is 9
Server version: 10.3.39-MariaDB MariaDB Server

Copyright (c) 2000, 2018, Oracle, MariaDB Corporation Ab and others.

Type 'help;' or '\h' for help. Type '\c' to clear the current input statement.

MariaDB [(none)]> show databases;
+--------------------+
| Database           |
+--------------------+
| information_schema |
| mysql              |
| performance_schema |
+--------------------+
3 rows in set (0.001 sec)

MariaDB [(none)]> 


MariaDB [(none)]> create database db1;
Query OK, 1 row affected (0.001 sec)

MariaDB [(none)]> show databases;
+--------------------+
| Database           |
+--------------------+
| db1                |
| information_schema |
| mysql              |
| performance_schema |
+--------------------+
4 rows in set (0.000 sec)

MariaDB [(none)]> use db1
Database changed
MariaDB [db1]> show tables;
MariaDB [db1]> create table servers (server_id int auto_increment primary key,server_name varchar(50) unique,role_name varchar(50),brand_name varchar(50),cpu_spedd int,description text);
Query OK, 0 rows affected (0.005 sec)

MariaDB [db1]> show tables;
+---------------+
| Tables_in_db1 |
+---------------+
| servers       |
+---------------+
1 row in set (0.000 sec)

MariaDB [db1]> describe servers;
+-------------+-------------+------+-----+---------+----------------+
| Field       | Type        | Null | Key | Default | Extra          |
+-------------+-------------+------+-----+---------+----------------+
| server_id   | int(11)     | NO   | PRI | NULL    | auto_increment |
| server_name | varchar(50) | YES  | UNI | NULL    |                |
| role_name   | varchar(50) | YES  |     | NULL    |                |
| brand_name  | varchar(50) | YES  |     | NULL    |                |
| cpu_spedd   | int(11)     | YES  |     | NULL    |                |
| description | text        | YES  |     | NULL    |                |
+-------------+-------------+------+-----+---------+----------------+
6 rows in set (0.001 sec)

MariaDB [db1]> insert into servers (server_name,role_name,brand_name,description) values ('popsrv1','mailserver','hp blade server','used for mail hosting');
Query OK, 1 row affected (0.001 sec)


MariaDB [db1]> select * from servers;
+-----------+-------------+------------+-----------------+-----------+-----------------------+
| server_id | server_name | role_name  | brand_name      | cpu_spedd | description           |
+-----------+-------------+------------+-----------------+-----------+-----------------------+
|         1 | popsrv1     | mailserver | hp blade server |      NULL | used for mail hosting |
+-----------+-------------+------------+-----------------+-----------+-----------------------+
1 row in set (0.000 sec)


MariaDB [db1]> insert into servers (server_name,role_name,brand_name,description) values ('ftpsrv1','FTP server','Dell blade server','used for FTP hosting');
Query OK, 1 row affected (0.002 sec)

MariaDB [db1]> select * from servers;
+-----------+-------------+------------+-------------------+-----------+-----------------------+
| server_id | server_name | role_name  | brand_name        | cpu_spedd | description           |
+-----------+-------------+------------+-------------------+-----------+-----------------------+
|         1 | popsrv1     | mailserver | hp blade server   |      NULL | used for mail hosting |
|         2 | ftpsrv1     | FTP server | Dell blade server |      NULL | used for FTP hosting  |
+-----------+-------------+------------+-------------------+-----------+-----------------------+
2 rows in set (0.000 sec)


MariaDB [db1]> select ;* from servers where brand_name like "%hp%";
+-----------+-------------+------------+-----------------+-----------+-----------------------+
| server_id | server_name | role_name  | brand_name      | cpu_spedd | description           |
+-----------+-------------+------------+-----------------+-----------+-----------------------+
|         1 | popsrv1     | mailserver | hp blade server |      NULL | used for mail hosting |
+-----------+-------------+------------+-----------------+-----------+-----------------------+
1 row in set (0.000 sec)

MariaDB [db1]> select * from servers where server_id IN (1);
+-----------+-------------+------------+-----------------+-----------+-----------------------+
| server_id | server_name | role_name  | brand_name      | cpu_spedd | description           |
+-----------+-------------+------------+-----------------+-----------+-----------------------+
|         1 | popsrv1     | mailserver | hp blade server |      NULL | used for mail hosting |
+-----------+-------------+------------+-----------------+-----------+-----------------------+
1 row in set (0.000 sec)

MariaDB [db1]> select * from servers where server_id IN (1,2);
+-----------+-------------+------------+-------------------+-----------+-----------------------+
| server_id | server_name | role_name  | brand_name        | cpu_spedd | description           |
+-----------+-------------+------------+-------------------+-----------+-----------------------+
|         1 | popsrv1     | mailserver | hp blade server   |      NULL | used for mail hosting |
|         2 | ftpsrv1     | FTP server | Dell blade server |      NULL | used for FTP hosting  |
+-----------+-------------+------------+-------------------+-----------+-----------------------+
2 rows in set (0.000 sec)

MariaDB [db1]> select * from servers where server_id > 1;


+-----------+-------------+------------+-------------------+--------


ariaDB [db1]> select * from servers where server_id =1;
+-----------+-------------+------------+-----------------+-----------+-----------------------+
| server_id | server_name | role_name  | brand_name      | cpu_spedd | description           |
+-----------+-------------+------------+-----------------+-----------+-----------------------+
|         1 | popsrv1     | mailserver | hp blade server |      NULL | used for mail hosting |
+-----------+-------------+------------+-----------------+-----------+-----------------------+
1 row in set (0.000 sec)

MariaDB [db1]> select * from servers where server_id > 1;
+-----------+-------------+------------+-------------------+-----------+----------------------+
| server_id | server_name | role_name  | brand_name        | cpu_spedd | description          |
+-----------+-------------+------------+-------------------+-----------+----------------------+
|         2 | ftpsrv1     | FTP server | Dell blade server |      NULL | used for FTP hosting |
+-----------+-------------+------------+-------------------+-----------+----------------------+
1 row in set (0.000 sec)

MariaDB [db1]> update servers set server_name="mailserver" where server_id=1
    -> ;
Query OK, 1 row affected (0.002 sec)
Rows matched: 1  Changed: 1  Warnings: 0

MariaDB [db1]> select * from servers;
+-----------+-------------+------------+-------------------+-----------+-----------------------+
| server_id | server_name | role_name  | brand_name        | cpu_spedd | description           |
+-----------+-------------+------------+-------------------+-----------+-----------------------+
|         1 | mailserver  | mailserver | hp blade server   |      NULL | used for mail hosting |
|         2 | ftpsrv1     | FTP server | Dell blade server |      NULL | used for FTP hosting  |
+-----------+-------------+------------+-------------------+-----------+-----------------------+
2 rows in set (0.000 sec)

MariaDB [db1]> delete from servers where server_id=2;
Query OK, 1 row affected (0.002 sec)

MariaDB [db1]> select * from servers;
+-----------+-------------+------------+-----------------+-----------+-----------------------+
| server_id | server_name | role_name  | brand_name      | cpu_spedd | description           |
+-----------+-------------+------------+-----------------+-----------+-----------------------+
|         1 | mailserver  | mailserver | hp blade server |      NULL | used for mail hosting |
+-----------+-------------+------------+-----------------+-----------+-----------------------+
1 row in set (0.000 sec)
MariaDB [db1]> create table product (id int(11) not null,name varchar(100) not null,price double not null,stock int(11) not null,id_category int(11) not null,id_manufacturer int(11) not null);
Query OK, 0 rows affected (0.009 sec)

MariaDB [db1]> show tables;
+---------------+
| Tables_in_db1 |
+---------------+
| product       |
| servers       |
+---------------+
2 rows in set (0.000 sec)

MariaDB [db1]> drop table product;
Query OK, 0 rows affected (0.006 sec)

MariaDB [db1]> show tables;
+---------------+
| Tables_in_db1 |
+---------------+
| servers       |
+---------------+
1 row in set (0.000 sec)


MariaDB [db1]> create user dbuser1@techi.com identified by 'redhat';
Query OK, 0 rows affected (0.000 sec)

MariaDB [db1]> select user,password from mysql.user
    -> ;
+---------+-------------------------------------------+
| user    | password                                  |
+---------+-------------------------------------------+
| root    | *84BB5DF4823DA319BBF86C99624479A198E6EEE9 |
| root    | *84BB5DF4823DA319BBF86C99624479A198E6EEE9 |
| root    | *84BB5DF4823DA319BBF86C99624479A198E6EEE9 |
| dbuser1 | *84BB5DF4823DA319BBF86C99624479A198E6EEE9 |
+---------+-------------------------------------------+
4 rows in set (0.000 sec)
MariaDB [db1]> create user testuser@techi.com identified by 'redhat';
Query OK, 0 rows affected (0.000 sec)

MariaDB [db1]> grant insert, update, delete, select on db1.* to dbuser1@techi.com;
Query OK, 0 rows affected (0.000 sec)
MariaDB [db1]> show grants for dbuser1@techi.com;
+----------------------------------------------------------------------------------------------------------------+
| Grants for dbuser1@techi.com                                                                                   |
+----------------------------------------------------------------------------------------------------------------+
| GRANT USAGE ON *.* TO `dbuser1`@`techi.com` IDENTIFIED BY PASSWORD '*84BB5DF4823DA319BBF86C99624479A198E6EEE9' |
| GRANT SELECT ON `databse`.* TO `dbuser1`@`techi.com`                                                           |
| GRANT SELECT, INSERT, UPDATE, DELETE ON `db1`.* TO `dbuser1`@`techi.com`                                       |
+----------------------------------------------------------------------------------------------------------------+
3 rows in set (0.000 sec)

MariaDB [db1]> grant select on *.* to testuser@techi.com;
Query OK, 0 rows affected (0.000 sec)

MariaDB [db1]> show grants for dbuser1@techi.com;

3 rows in set (0.000 sec)

MariaDB [db1]> show grants for testuser@techi.com;

MariaDB [db1]> revoke create, alter,drop  on db1.product from dbuser1@techi.com;
Query OK, 0 rows affected (0.000 sec)

MariaDB [db1]> 

ariaDB [db1]> drop user testuser2@techi.com;
Query OK, 0 rows affected (0.000 sec)
root@slave ~]# mkdir /backup
[root@slave ~]# mysqldump -u root -p db1 > /backup/db.dump               #######backup all database
Enter password: 
[root@slave ~]# mysqldump -u root -p --all-databases > /backup/maridb.dump
Enter password: redhat
    


[root@slave ~]#  mysqldump -u root -p db1 < /backup/db.dump                     #restore 

Boomadevi,Sooraj Thampi,Shraddha, Vikram,Souvik,Roshan,Anuradha,sukanta